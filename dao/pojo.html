<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head><meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"/>
<title>更快的构建你的POJO</title><link href="../zdoc.css" rel="stylesheet" type="text/css"/>
</head>
<body><a name="top"></a>
<div class="zdoc_header">更快的构建你的POJO</div>
<div class="zdoc_author"><em>By:</em><b>zozoh</b><a href="mailto:zozohtnt@gmail.com">&lt;zozohtnt@gmail.com&gt;</a></div>
<div class="zdoc_body">
<ul class="zdoc_index_table">
<li>
<div><span class="num">1</span><a href="#为什么需要提供更多构建_POJO_的手段">为什么需要提供更多构建 POJO 的手段</a></div>
</li>
<li>
<div><span class="num">2</span><a href="#将构建的过程掌握在你自己的手里">将构建的过程掌握在你自己的手里</a></div>
</li>
<li>
<div><span class="num">3</span><a href="#总结一下这四个约定">总结一下这四个约定</a></div>
</li>
</ul>
<div class="hr"><b></b></div>
<h1><a name="为什么需要提供更多构建_POJO_的手段"></a>为什么需要提供更多构建 POJO 的手段</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<p>当查询以及获取一个或者是多个 POJO 时，Nutz.Dao 采用反射来创建对象以及为对象的各个相关字段填充值。为了提高速度，Nutz.Dao 对对象采取一些缓存的策略，所以基本上不用去查询每个对象的构造函数以及getter，setter 或者公共字段,所有的时间开销都集中在反射的 invoke 方法上。事实证明，这让 POJO 的构建速度提高了不少，但是对于那些还想对速度进行优化的应用，怎么办呢？ Nutz.Dao 还提供了更加极限的手段。</p>
<div class="hr"><b></b></div>
<h1><a name="将构建的过程掌握在你自己的手里"></a>将构建的过程掌握在你自己的手里</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<p>有些人说JDK1.5 以后，反射更快了。并且由于 Nutz.Dao 对于实体的反射做了缓存，所以它创建对象比一般的反射更快，但是，还是有些人不满意，他们还需要更快。优先顺序：</p>
<pre>public Pet(ResultSet rs){}
public static create(ResultSet rs){} <span class="zdoc_code_cmt">// 工厂方法的名称可随意定
</span>public Pet(){} <span class="zdoc_code_cmt">// 这是最常用的方式,会通过FastClass进行加速.
</span>public static create(){}
</pre>
<p>以上形式的方法必须有一个,如果均不存在,会抛出异常,提醒添加无参构造方法.</p>
<div class="hr"><b></b></div>
<h1><a name="总结一下这四个约定"></a>总结一下这四个约定</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<p>通过头两个约定，你可以让你的数据库操作同直接调用 JDBC 接口一样快。别忘了，在数据库操作的时候，拼装SQL 这点小开销几乎可以忽略不计。第三个约定，适用于在你不希望暴露POJO的构造函数的前提下。最后一个约定则是 Nutz.Dao 的默认期望的工作方式。</p>
</div>
<div class="zdoc_footer"><em>By:</em><b>zozoh</b><a href="mailto:zozohtnt@gmail.com">&lt;zozohtnt@gmail.com&gt;</a></div>
</body>
</html>